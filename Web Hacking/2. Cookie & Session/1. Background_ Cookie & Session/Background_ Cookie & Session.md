# 쿠키  
## 쿠키  
**쿠키(Cookie)** : **Connectionless** (하나의 요청에 하나의 응답을 한 후 연결을 종료하는 것), **Stateless** (통신이 끝난 후 상태 정보를 저장하지 않는 것) 특성을 갖는 HTTP에서 상태를 유지하는 것  
-> Connectionless, Stateless는 **HTTP 프로토콜 특징**이다.

## 용도
쿠키는 **정보 기록**, **상태 정보**를 표현합니다.  

### 정보 기록
**정보 기록** : 클라이언트의 팝업 옵션을 기억하기 위해 쿠키에 **해당 정보를 기록**하고, 쿠키를 통해 **팝업 창 표시 여부**를 판단함  

### 상태 정보
**상태 정보** : **클라이언트를 식별**할 수 있는 값을 쿠키에 저장해 사용  

## 쿠키 유무에 따른 통신  
### 쿠키가 없는 통신  
서버는 요청을 보낸 클라이언트가 누군지 알 수 없어서, **어떤 클라이언트와 통신하는지 알 수 없습니다.**  

<img src="1.png">  

### 쿠키가 있는 통신  
클라이언트는 서버에 요청을 보낼 때마다, 서버는 **쿠키를 통해 클라이언트를 식별함.**

<img src="2.png">  

## 쿠키 변조  
**쿠키 정보를 변조해** 서버에 요청을 보낼 수 있습니다.  
-> 즉, 그 쿠키를 통해 이용자의 정보를 **사칭**할 수 있다.  

<img src="3.png">  

# 세션  
## 세션  
**세션(Session)** : 클라이언트가 **인증 정보를 변조할 수 없게** 하기 위해 사용하는 것  
-> 쉽게 말하면 **정보를 변조할 수 없는 쿠키**  

<img src="4.png">  

# 쿠키 및 세션 실습
## Cookie & Session Lab

**추후에 추가**  

## 쿠키 적용법  
### 서버
HTTP 응답 중 헤더에 **쿠키 설정 헤더 (Set-Cookie)** 를 추가하면 클라이언트의 브라우저가 쿠키를 설정합니다.  

```http
HTTP/1.1 200 OK
Server: Apache/2.4.29 (Ubuntu)
Set-Cookie: name=test;
Set-Cookie: age=30; Expires=Fri, 30 Sep 2022 14:54:50 GMT;
...
```

### 클라이언트

**자바스크립트**를 사용해 쿠키를 설정합니다.  

```javascript
document.cookie = "name=test;"
document.cookie = "age=30; Expires=Fri, 30 Sep 2022 14:54:50 GMT;"
```
  
그리고 dev-tool을 통해 쿠키를 확인할 수 있다.  
1. 크롬 Console에서 **document.cookie**를 적으면 쿠키를 확인할 수 있다.  
2. 크롬 Application에서 쿠키들을 확인할 수 있다.  


## 세션 활용  

1. 드림핵 로그인 페이지에서 dev-tool 에서 **Network**로 가면, 로그인을 성공하면 저장된 **set-cookie** 에 세션 정보가 저장
2. **Application**에서 드림핵에 대한 쿠키 **(sessionid)** 를 볼 수 있다.  
3. 그 쿠키를 삭제하면 로그아웃 된다.
4. 쿠키에 sessionid 헤더를 추가하고, 2번에 있던 세션 값을 넣으면 새로고침 후 로그인 된다.

**세션 하이재킹(Session Hijacking)** : 세션에 해당하는 이용자의 인증 상태를 훔치는 것(쿠키를 통해서)  

# 마치며
## 마치며

- **Connectionless**: **하나의 요청**에 **하나의 응답**을 한 후 **연결을 종료**하는 것을 의미합니다.
- **Stateless**: 통신이 끝난 후 **상태 정보를 저장하지 않는 것**을 의미합니다.
- **쿠키 (Cookie)**: HTTP에서 **상태를 유지**하기 위해 사용하는 **Key-Value 형태의 값**
- **세션 (Session)**: 쿠키에 포함된 **Session ID**를 사용해 서버에 저장된 **세션 데이터에 접근**하는 방식
- **세션 하이재킹 (Session Hijacking)**: 타 이용자의 **쿠키를 훔쳐** 인증 정보를 획득하는 공격

# 퀴즈  
1. 다음 중 서버에 요청을 보내는 역할을 하는 것은?  
**답 : 클라이언트**  
2. 다음 중 세션이 인증 정보를 저장하는 곳은?  
**답 : 서버**  
3. 통신이 끝난 후 상태 정보를 저장하지 않는 특성을 가리키는 용어는?  
**답 : Stateless**
